\hypertarget{structSpectrogramVisualizer}{}\section{Spectrogram\+Visualizer Class Reference}
\label{structSpectrogramVisualizer}\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}


{\ttfamily \#include $<$Spectrogram\+Visualizer.\+hpp$>$}

Inheritance diagram for Spectrogram\+Visualizer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{structSpectrogramVisualizer}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structSpectrogramVisualizer_1_1shortcuts}{shortcuts}}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structSpectrogramVisualizer_a7b971af130bf95c4f307e2add2468825}{Spectrogram\+Visualizer}} (int, int)
\item 
\mbox{\Hypertarget{structSpectrogramVisualizer_a483fbc5948a64946b397ebb6d54146b6}\label{structSpectrogramVisualizer_a483fbc5948a64946b397ebb6d54146b6}} 
{\bfseries Spectrogram\+Visualizer} (const \mbox{\hyperlink{structSpectrogramVisualizer}{Spectrogram\+Visualizer}} \&)
\item 
\mbox{\Hypertarget{structSpectrogramVisualizer_a2212e878cb2cf147fd885989e511ed77}\label{structSpectrogramVisualizer_a2212e878cb2cf147fd885989e511ed77}} 
\mbox{\hyperlink{structSpectrogramVisualizer}{Spectrogram\+Visualizer}} \& {\bfseries operator=} (const \mbox{\hyperlink{structSpectrogramVisualizer}{Spectrogram\+Visualizer}} \&)
\item 
\mbox{\hyperlink{structSpectrogramVisualizer_a2b55364382a4ee290918a05946505561}{$\sim$\+Spectrogram\+Visualizer}} ()
\item 
virtual void \mbox{\hyperlink{structSpectrogramVisualizer_a529c64c733ffc564764593329c483ae2}{display}} ()
\item 
virtual void \mbox{\hyperlink{structSpectrogramVisualizer_a9b9aa780d95f710b1c876ce49abac9a1}{display\+Text}} ()
\item 
virtual void \mbox{\hyperlink{structSpectrogramVisualizer_a669c19fe9dc24dc89e1cc518edb24de6}{idle}} ()
\item 
virtual void \mbox{\hyperlink{structSpectrogramVisualizer_a301989369e63d88cd6a59d12c23b4551}{pause}} ()
\item 
virtual void \mbox{\hyperlink{structSpectrogramVisualizer_a2901f4ea1e35d4c7e6660f6c19ed468f}{keyboard}} (unsigned char key, int x\+Pos, int y\+Pos)
\item 
virtual void \mbox{\hyperlink{structSpectrogramVisualizer_a631d3522ef8d8bdc6fd9ba9acf2f15ec}{special}} (int key, int x\+Pos, int y\+Pos)
\item 
virtual void \mbox{\hyperlink{structSpectrogramVisualizer_a789c6b59ab3a6960056eaab014163b91}{reshape}} (int w, int h)
\item 
virtual void \mbox{\hyperlink{structSpectrogramVisualizer_a949b2e0bfd260e6f8d63b5867f1b4edf}{mouse}} (int button, int state, int x, int y)
\item 
virtual void \mbox{\hyperlink{structSpectrogramVisualizer_a8ab333867c86cfa188ff026410e271aa}{motion}} (int x, int y)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{structSpectrogramVisualizer_add6b6c6e7a1768bd6fef3256f1cb26bc}\label{structSpectrogramVisualizer_add6b6c6e7a1768bd6fef3256f1cb26bc}} 
{\bfseries q}
\item 
\mbox{\Hypertarget{structSpectrogramVisualizer_a969c09495e18bec03ba7145b967b6cf7}\label{structSpectrogramVisualizer_a969c09495e18bec03ba7145b967b6cf7}} 
{\bfseries d}
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static const char $\ast$const \mbox{\hyperlink{structSpectrogramVisualizer_ad833647df19d8ae0eb2e47efe989d1d9}{note\+Names}} \mbox{[}$\,$\mbox{]}
\item 
static const \mbox{\hyperlink{structSpectrogramVisualizer_1_1shortcuts}{shortcuts}} \mbox{\hyperlink{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}{K\+E\+Y\+B\+O\+A\+R\+D\+\_\+\+S\+H\+O\+R\+T\+C\+U\+TS}}
\item 
static const float \mbox{\hyperlink{structSpectrogramVisualizer_adfe2ed143313d59d7c118cadec1460b9}{M\+I\+D\+D\+L\+E\+\_\+\+C\+\_\+\+F\+R\+E\+Q\+U\+E\+N\+CY}} = 261.\+626f
\item 
static const unsigned int \mbox{\hyperlink{structSpectrogramVisualizer_affbdeff0d7b800feb17aab0a367222da}{N\+\_\+\+S\+E\+M\+I\+T\+O\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+O\+C\+T\+A\+VE}} = 12
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Obtains and draws a spectrogram from continuous audio input. Implements methods from the abstract class \mbox{\hyperlink{classGraphicsItem}{Graphics\+Item}}, which are called by a subject \mbox{\hyperlink{classDisplay}{Display}} instance as an implementation of the observer design pattern. \begin{DoxyAuthor}{Author}
Anthony Agnone, Aug 2016 
\end{DoxyAuthor}


Definition at line 9 of file Spectrogram\+Visualizer.\+cpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{structSpectrogramVisualizer_a7b971af130bf95c4f307e2add2468825}\label{structSpectrogramVisualizer_a7b971af130bf95c4f307e2add2468825}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{Spectrogram\+Visualizer()}{SpectrogramVisualizer()}}
{\footnotesize\ttfamily Spectrogram\+Visualizer\+::\+Spectrogram\+Visualizer (\begin{DoxyParamCaption}\item[{int}]{scroll\+Factor,  }\item[{int}]{requested\+Input\+Device\+Id }\end{DoxyParamCaption})}

Overloaded constructor to initialize various member parameters. 

Definition at line 21 of file Spectrogram\+Visualizer.\+cpp.


\begin{DoxyCode}
21                                                                                          \{
22     isPaused = \textcolor{keyword}{false};
23     colorScale[0] = 100.0f;     \textcolor{comment}{// 8-bit intensity offset}
24     colorScale[1] = 255 / 120.0f;     \textcolor{comment}{// 8-bit intensity slope (per dB units)}
25     audioInput = \textcolor{keyword}{new} \mbox{\hyperlink{classPortAudio}{PortAudio}}(requestedInputDeviceId);
26     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} spectrogramSize = audioInput->getSpectrogramSize();
27 
28     spectrogramBytes = \textcolor{keyword}{new} \textcolor{keywordtype}{char}[spectrogramSize];
29     zeros(spectrogramBytes, spectrogramSize);
30 
31     spectrogramFloat = \textcolor{keyword}{new} \textcolor{keywordtype}{float}[spectrogramSize];
32     zeros(spectrogramFloat, spectrogramSize);
33 
34     highestFrequency = audioInput->getSamplingRate() / 2.0f;
35     hzPerPixelY = (float) highestFrequency / viewportSize[1];
36     hzPerPixelX = (float) highestFrequency / viewportSize[0];
37     fpsTick = time(\textcolor{keyword}{nullptr});
38     frameCount = 0;
39     fps = 0;
40     colorMode = 2;
41     this->scrollFactor = scrollFactor;
42     scrollCount = 0;
43     gettimeofday(&startTime, \textcolor{keyword}{nullptr});
44     runTime = 0.0;
45     frequencyReadOff = 0;
46     diagnose = \textcolor{keyword}{false};
47     strcpy(diagnosis, \textcolor{stringliteral}{"no diagnosis ..."});
48 
49     OUT(\textcolor{stringliteral}{"Highest Frequency: "} << highestFrequency);
50 
51     specId = 7;
52 \textcolor{preprocessor}{#ifdef DISPLAY\_SPECTROGRAM}
53     glGenTextures(14, &specId);
54     glBindTexture(GL\_TEXTURE\_2D, specId);
55     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_S, GL\_REPEAT);
56     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_T, GL\_REPEAT);
57     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_MIN\_FILTER, GL\_LINEAR);
58     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_MAG\_FILTER, GL\_LINEAR);
59 \textcolor{preprocessor}{#endif}
60 
61     \textcolor{comment}{/* notify the AudioInput instance that it should start capturing audio */}
62     \textcolor{keywordflow}{if}(audioInput->\mbox{\hyperlink{classAudioInput_afa753742035f7069f5ef0c2ece6a62fe}{startCapture}}() != 0) \{
63         OUT(\textcolor{stringliteral}{"Failed to start capturing audio."});
64         \textcolor{keywordflow}{throw} 99;
65     \}
66 \}
\end{DoxyCode}
\mbox{\Hypertarget{structSpectrogramVisualizer_a2b55364382a4ee290918a05946505561}\label{structSpectrogramVisualizer_a2b55364382a4ee290918a05946505561}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!````~Spectrogram\+Visualizer@{$\sim$\+Spectrogram\+Visualizer}}
\index{````~Spectrogram\+Visualizer@{$\sim$\+Spectrogram\+Visualizer}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{$\sim$\+Spectrogram\+Visualizer()}{~SpectrogramVisualizer()}}
{\footnotesize\ttfamily Spectrogram\+Visualizer\+::$\sim$\+Spectrogram\+Visualizer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Empty destructor. 

Definition at line 124 of file Spectrogram\+Visualizer.\+cpp.


\begin{DoxyCode}
124                                               \{
125     \textcolor{comment}{// this causes a seg fault?}
126     \textcolor{comment}{//if (audioInput != nullptr) delete audioInput;}
127 
128     \textcolor{keyword}{delete}[] spectrogramBytes;
129     \textcolor{keyword}{delete}[] spectrogramFloat;
130 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{structSpectrogramVisualizer_a529c64c733ffc564764593329c483ae2}\label{structSpectrogramVisualizer_a529c64c733ffc564764593329c483ae2}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!display@{display}}
\index{display@{display}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{display()}{display()}}
{\footnotesize\ttfamily void Spectrogram\+Visualizer\+::display (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Displays all information and graphics on the screen. This function is routinely called by the \mbox{\hyperlink{classDisplay}{Display}} subject, and is one of many functions that the class defines as a \mbox{\hyperlink{classGraphicsItem}{Graphics\+Item}} observer in the observer design pattern. 

Implements \mbox{\hyperlink{classGraphicsItem}{Graphics\+Item}}.



Definition at line 464 of file Spectrogram\+Visualizer.\+cpp.


\begin{DoxyCode}
464                                     \{
465 \textcolor{preprocessor}{#ifdef DEBUG}
466     \textcolor{comment}{/* for sanity checking, draw boundary lines for the plot area in green */}
467     glMatrixMode(GL\_MODELVIEW);
468     glPushMatrix(); \textcolor{comment}{// use modelview matrix to transform [-lookbackSeconds,0]x[-1,1] somewhere}
469     glTranslatef(0.001, 0.001, 0);   \textcolor{comment}{// decide the location of 0,0 of the plot}
470     glScalef(0.999, 0.995, 1.0);  \textcolor{comment}{// x-scale for freq-units, y-scale for dB}
471     glColor4f(0.0, 1.0, 0.0, 1);
472     \textcolor{keywordtype}{int} xStart = 0.0, xEnd = 1.0;
473     \textcolor{keywordtype}{int} yStart = 0.0, yEnd = 1.0;
474     glBegin(GL\_LINE\_LOOP);
475         glVertex2f(xStart, yStart);
476         glVertex2f(xEnd, yStart);
477         glVertex2f(xEnd, yEnd);
478         glVertex2f(xStart, yEnd);
479         glVertex2f(xStart, yStart);
480     glEnd();
481     glPopMatrix();
482     glColor4f(0.7, 1.0, 1.0, 1);
483 \textcolor{preprocessor}{#endif}
484 
485 \textcolor{preprocessor}{#ifdef DISPLAY\_TIME}
486     plotTimeDomain();
487 \textcolor{preprocessor}{#endif}
488 
489 \textcolor{preprocessor}{#ifdef DISPLAY\_SPECMAG}
490     plotSpectralMagnitude();
491 \textcolor{preprocessor}{#endif}
492 
493 \textcolor{preprocessor}{#ifdef DISPLAY\_SPECTROGRAM}
494     plotSpectrogram();
495     scrollSpectrogram();
496     ++scrollCount;
497     \textcolor{keywordflow}{if} (scrollCount == SpectrogramVisualizer::scrollFactor) \{
498         scrollCount = 0;
499     \}
500 \textcolor{preprocessor}{#endif}
501 
502 \textcolor{preprocessor}{#ifdef DISPLAY\_TEXT}
503     \mbox{\hyperlink{structSpectrogramVisualizer_a9b9aa780d95f710b1c876ce49abac9a1}{displayText}}();
504 \textcolor{preprocessor}{#endif}
505 
506 \}
\end{DoxyCode}
\mbox{\Hypertarget{structSpectrogramVisualizer_a9b9aa780d95f710b1c876ce49abac9a1}\label{structSpectrogramVisualizer_a9b9aa780d95f710b1c876ce49abac9a1}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!display\+Text@{display\+Text}}
\index{display\+Text@{display\+Text}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{display\+Text()}{displayText()}}
{\footnotesize\ttfamily void Spectrogram\+Visualizer\+::display\+Text (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Displays all text on the canvas. 

Implements \mbox{\hyperlink{classGraphicsItem}{Graphics\+Item}}.



Definition at line 508 of file Spectrogram\+Visualizer.\+cpp.


\begin{DoxyCode}
508                                         \{
509     glEnable(GL\_BLEND); \textcolor{comment}{// glBlendFunc (GL\_ONE,GL\_ZERO); // overwrite entirely}
510     glBlendFunc(GL\_ONE, GL\_ONE\_MINUS\_SRC\_ALPHA);
511 
512     glColor4f(1, .4, .4, 1.0); \textcolor{comment}{// write FPS, other params... coords in unit square}
513     \textcolor{keywordtype}{char} str[50];
514     sprintf(str, \textcolor{stringliteral}{"%d FPS"}, fps);
515     \mbox{\hyperlink{classDisplay_ac62e7e33c27d8c012c3efb8c07f3fc11}{Display::smallText}}(0.92, 0.96, str);
516     sprintf(str, \textcolor{stringliteral}{"gain offset %.0f dB"}, colorScale[0]);
517     \mbox{\hyperlink{classDisplay_ac62e7e33c27d8c012c3efb8c07f3fc11}{Display::smallText}}(0.02, 0.04, str);
518     sprintf(str, \textcolor{stringliteral}{"dyn range  %.1f dB"}, 255.0 / colorScale[1]);
519     \mbox{\hyperlink{classDisplay_ac62e7e33c27d8c012c3efb8c07f3fc11}{Display::smallText}}(0.02, 0.02, str);
520 
521     \textcolor{keywordflow}{if} (diagnose) \{  \textcolor{comment}{// show diagnosis}
522         glColor4f(.2, .2, .2, 0.8);  \textcolor{comment}{// transparent box}
523         glMatrixMode(GL\_MODELVIEW);
524         glPushMatrix(); \textcolor{comment}{// use modelview matrix to transform unit square to text box}
525         glTranslatef(0.5, 0.5, 0);
526         glScalef(0.5, 0.4, 1);
527         glTranslatef(-0.5f, -0.5f, 0);
528         glBegin(GL\_POLYGON);
529         glVertex2f(0, 0);
530         glVertex2f(1, 0);
531         glVertex2f(1, 1);
532         glVertex2f(0, 1);
533         glVertex2f(0, 0); \textcolor{comment}{// unit square}
534         glEnd();
535         glColor4f(1, 1, 1, 1);                  \textcolor{comment}{// text}
536         \mbox{\hyperlink{classDisplay_ae6e3bc9a8a261958251d1c3d6e6f791b}{Display::largeText}}(0.2, 0.5, diagnosis); \textcolor{comment}{// coords relative to box as unit sq}
537         glPopMatrix();
538     \}
539 \}
\end{DoxyCode}
\mbox{\Hypertarget{structSpectrogramVisualizer_a669c19fe9dc24dc89e1cc518edb24de6}\label{structSpectrogramVisualizer_a669c19fe9dc24dc89e1cc518edb24de6}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!idle@{idle}}
\index{idle@{idle}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{idle()}{idle()}}
{\footnotesize\ttfamily void Spectrogram\+Visualizer\+::idle (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Called during an idling period. 

Implements \mbox{\hyperlink{classGraphicsItem}{Graphics\+Item}}.



Definition at line 541 of file Spectrogram\+Visualizer.\+cpp.


\begin{DoxyCode}
541                                  \{
542     ++frameCount;        \textcolor{comment}{// compute FPS...}
543     time\_t now = time(NULL);     \textcolor{comment}{// integer in seconds}
544     \textcolor{keywordflow}{if} (now > fpsTick) \{    \textcolor{comment}{// advanced by at least 1 sec?}
545         fps = frameCount;
546         frameCount = 0;
547         fpsTick = now;
548     \}
549 
550     \textcolor{comment}{/* if not paused, scroll every scrollFactor vSyncs */}
551     \textcolor{keywordflow}{if} (!audioInput->isPause()) \{
552         timeval nowe;  \textcolor{comment}{// update runtime}
553         gettimeofday(&nowe, \textcolor{keyword}{nullptr});
554         runTime += 1 / FPS;        \textcolor{comment}{// is less jittery, approx true}
555         runTime = (float) fmod(runTime, 100.0);    \textcolor{comment}{// wrap time label after 100 secs}
556 
557         \textcolor{comment}{//++scrollCount;}
558         \textcolor{comment}{//if (scrollCount == SpectrogramVisualizer::scrollFactor) \{}
559         \textcolor{comment}{//    scrollSpectrogram();}
560         \textcolor{comment}{//    scrollCount = 0;}
561         \textcolor{comment}{//\}}
562     \}
563 \}
\end{DoxyCode}
\mbox{\Hypertarget{structSpectrogramVisualizer_a2901f4ea1e35d4c7e6660f6c19ed468f}\label{structSpectrogramVisualizer_a2901f4ea1e35d4c7e6660f6c19ed468f}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!keyboard@{keyboard}}
\index{keyboard@{keyboard}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{keyboard()}{keyboard()}}
{\footnotesize\ttfamily void Spectrogram\+Visualizer\+::keyboard (\begin{DoxyParamCaption}\item[{unsigned char}]{key,  }\item[{int}]{x\+Pos,  }\item[{int}]{y\+Pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Responds to a pressed keyboard key to provide an appropriate change in display or functionality, according to \mbox{\hyperlink{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}{Spectrogram\+Visualizer\+::\+K\+E\+Y\+B\+O\+A\+R\+D\+\_\+\+S\+H\+O\+R\+T\+C\+U\+TS}}. 
\begin{DoxyParams}{Parameters}
{\em key} & char representation of the key pressed. \\
\hline
{\em x\+Pos} & mouse x position when the key was pressed. \\
\hline
{\em y\+Pos} & mouse y position when the key was pressed. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classGraphicsItem}{Graphics\+Item}}.



Definition at line 570 of file Spectrogram\+Visualizer.\+cpp.


\begin{DoxyCode}
570                                                                           \{
571     \textcolor{keywordflow}{if} (key == \mbox{\hyperlink{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}{KEYBOARD\_SHORTCUTS}}.ESCAPE || key == 
      \mbox{\hyperlink{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}{KEYBOARD\_SHORTCUTS}}.QUIT) \{  \textcolor{comment}{// esc or q to quit}
572         audioInput->\mbox{\hyperlink{classAudioInput_a4fce5476455b1df813f1cb6eebb08311}{quitNow}}();
573         exit(0);
574     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (key == \mbox{\hyperlink{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}{KEYBOARD\_SHORTCUTS}}.PAUSE) \{
575         \mbox{\hyperlink{structSpectrogramVisualizer_a301989369e63d88cd6a59d12c23b4551}{pause}}();
576     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (key == \mbox{\hyperlink{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}{KEYBOARD\_SHORTCUTS}}.DIAGNOSE) \{
577         diagnose = !diagnose;         \textcolor{comment}{// toggle text overlay}
578     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (key == \mbox{\hyperlink{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}{KEYBOARD\_SHORTCUTS}}.SAMPLE\_RATE\_UP) \{               \textcolor{comment}{// speed up
       scroll samplingRate}
579         \textcolor{keywordflow}{if} (SpectrogramVisualizer::scrollFactor > 1) \{
580             SpectrogramVisualizer::scrollFactor--;
581             OUT(\textcolor{stringliteral}{"scrollFactor: "} << scrollFactor);
582             scrollCount = 0;
583         \}
584     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (key == \mbox{\hyperlink{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}{KEYBOARD\_SHORTCUTS}}.SAMPLE\_RATE\_DOWN) \{
585         \textcolor{keywordflow}{if} (SpectrogramVisualizer::scrollFactor < 50)
586         \{
587             SpectrogramVisualizer::scrollFactor++;
588             OUT(\textcolor{stringliteral}{"scrollFactor: "} << scrollFactor);
589         \}
590     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (key == \mbox{\hyperlink{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}{KEYBOARD\_SHORTCUTS}}.CHANGE\_COLOR\_SCHEME) \{
591         colorMode = (colorMode + 1) % 3;     \textcolor{comment}{// spectrogram color scheme}
592         recomputeSpectrogramBytes();
593     \} \textcolor{keywordflow}{else} \{
594         fprintf(stderr, \textcolor{stringliteral}{"pressed key %d\(\backslash\)n"}, (\textcolor{keywordtype}{int}) key);
595     \}
596 \}
\end{DoxyCode}
\mbox{\Hypertarget{structSpectrogramVisualizer_a8ab333867c86cfa188ff026410e271aa}\label{structSpectrogramVisualizer_a8ab333867c86cfa188ff026410e271aa}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!motion@{motion}}
\index{motion@{motion}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{motion()}{motion()}}
{\footnotesize\ttfamily void Spectrogram\+Visualizer\+::motion (\begin{DoxyParamCaption}\item[{int}]{x,  }\item[{int}]{y }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Responds to mouse movement while one or more mouse buttons are pressed. 
\begin{DoxyParams}{Parameters}
{\em x} & coordinate x of the mouse cursor. \\
\hline
{\em y} & coordinate y of the mouse cursor. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classGraphicsItem}{Graphics\+Item}}.



Definition at line 641 of file Spectrogram\+Visualizer.\+cpp.


\begin{DoxyCode}
641                                                \{
642     \textcolor{keyword}{auto} dx = (int) (x - mouseHandle[0]);
643     \textcolor{keyword}{auto} dy = (int) (y - mouseHandle[1]);
644     \textcolor{keywordflow}{if} (mouseHandle[2] == GLUT\_MIDDLE\_BUTTON) \{   \textcolor{comment}{// controls color scale}
645         colorScale[0] += dx / 5.0;  \textcolor{comment}{// brightness}
646         colorScale[1] *= exp(-dy / 200.0); \textcolor{comment}{// contrast}
647     \}
648     mouseHandle[0] = x;
649     mouseHandle[1] = y;
650 \}
\end{DoxyCode}
\mbox{\Hypertarget{structSpectrogramVisualizer_a949b2e0bfd260e6f8d63b5867f1b4edf}\label{structSpectrogramVisualizer_a949b2e0bfd260e6f8d63b5867f1b4edf}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!mouse@{mouse}}
\index{mouse@{mouse}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{mouse()}{mouse()}}
{\footnotesize\ttfamily void Spectrogram\+Visualizer\+::mouse (\begin{DoxyParamCaption}\item[{int}]{button,  }\item[{int}]{state,  }\item[{int}]{x,  }\item[{int}]{y }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Responds to mouse input by the user. 
\begin{DoxyParams}{Parameters}
{\em button} & mouse button pressed by the user. \\
\hline
{\em state} & whether the mouse button was just pressed or released by the user. \\
\hline
{\em x} & coordinate x of the mouse cursor when the press happened. \\
\hline
{\em y} & coordinate y of the mouse cursor when the press happened. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classGraphicsItem}{Graphics\+Item}}.



Definition at line 626 of file Spectrogram\+Visualizer.\+cpp.


\begin{DoxyCode}
626                                                                      \{
627     mouseHandle[0] = x;  \textcolor{comment}{// this seems to be needed for correct panning}
628     mouseHandle[1] = y;
629     mouseHandle[2] = button;
630 
631     \textcolor{keywordflow}{if} (button == GLUT\_LEFT\_BUTTON) \{
632         frequencyReadOff = state == GLUT\_DOWN ? 1 : 0;  \textcolor{comment}{/* toggle */}
633     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (button == GLUT\_RIGHT\_BUTTON) \{
634         frequencyReadOff = state == GLUT\_DOWN ? 2 : 0;  \textcolor{comment}{/* toggle with harmonics shown */}
635     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (state == GLUT\_UP) \{
636         \textcolor{comment}{/* GLUT\_MIDDE\_BUTTON is pressed */}
637         recomputeSpectrogramBytes();
638     \}
639 \}
\end{DoxyCode}
\mbox{\Hypertarget{structSpectrogramVisualizer_a301989369e63d88cd6a59d12c23b4551}\label{structSpectrogramVisualizer_a301989369e63d88cd6a59d12c23b4551}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!pause@{pause}}
\index{pause@{pause}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{pause()}{pause()}}
{\footnotesize\ttfamily void Spectrogram\+Visualizer\+::pause (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Called during a pause period. 

Implements \mbox{\hyperlink{classGraphicsItem}{Graphics\+Item}}.



Definition at line 565 of file Spectrogram\+Visualizer.\+cpp.


\begin{DoxyCode}
565                                   \{
566     isPaused = !isPaused;
567     audioInput->setPause(!audioInput->isPause());
568 \}
\end{DoxyCode}
\mbox{\Hypertarget{structSpectrogramVisualizer_a789c6b59ab3a6960056eaab014163b91}\label{structSpectrogramVisualizer_a789c6b59ab3a6960056eaab014163b91}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!reshape@{reshape}}
\index{reshape@{reshape}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{reshape()}{reshape()}}
{\footnotesize\ttfamily void Spectrogram\+Visualizer\+::reshape (\begin{DoxyParamCaption}\item[{int}]{w,  }\item[{int}]{h }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Responds to a reshaping of the main window, reshaping all of its constituent plots and text. 
\begin{DoxyParams}{Parameters}
{\em w} & new width of the main window. \\
\hline
{\em h} & new height of the main window. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classGraphicsItem}{Graphics\+Item}}.



Definition at line 616 of file Spectrogram\+Visualizer.\+cpp.


\begin{DoxyCode}
616                                                 \{
617     viewportSize[0] = w;
618     viewportSize[1] = h;
619 
620     \textcolor{comment}{//OUT("Reshaping to width " << w << ", highestFrequency: " << highestFrequency);}
621     hzPerPixelX = 1.0f / \mbox{\hyperlink{classAudioInput_a4be6c19fca6626b2ccee1eeca458f7c8}{AudioInput::N\_FREQUENCIES}};
622     \textcolor{comment}{//hzPerPixelX = highestFrequency / w;}
623     hzPerPixelY = highestFrequency / h;
624 \}
\end{DoxyCode}
\mbox{\Hypertarget{structSpectrogramVisualizer_a631d3522ef8d8bdc6fd9ba9acf2f15ec}\label{structSpectrogramVisualizer_a631d3522ef8d8bdc6fd9ba9acf2f15ec}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!special@{special}}
\index{special@{special}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{special()}{special()}}
{\footnotesize\ttfamily void Spectrogram\+Visualizer\+::special (\begin{DoxyParamCaption}\item[{int}]{key,  }\item[{int}]{x\+Pos,  }\item[{int}]{y\+Pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Responds to a pressed special keyboard key to provide an appropriate change in display or functionality, according to \mbox{\hyperlink{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}{Spectrogram\+Visualizer\+::\+K\+E\+Y\+B\+O\+A\+R\+D\+\_\+\+S\+H\+O\+R\+T\+C\+U\+TS}}. 
\begin{DoxyParams}{Parameters}
{\em key} & char representation of the special key pressed. \\
\hline
{\em x\+Pos} & mouse x position when the key was pressed. \\
\hline
{\em y\+Pos} & mouse y position when the key was pressed. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classGraphicsItem}{Graphics\+Item}}.



Definition at line 598 of file Spectrogram\+Visualizer.\+cpp.


\begin{DoxyCode}
598                                                                \{
599     \textcolor{keywordflow}{if} (key == 102) \{ \textcolor{comment}{// rt}
600         colorScale[1] *= 1.5;
601         recomputeSpectrogramBytes(); \textcolor{comment}{// contrast}
602     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (key == 100) \{ \textcolor{comment}{// lt}
603         colorScale[1] /= 1.5;
604         recomputeSpectrogramBytes(); \textcolor{comment}{// contrast}
605     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (key == 103) \{ \textcolor{comment}{// dn}
606         colorScale[0] -= 20;
607         recomputeSpectrogramBytes();  \textcolor{comment}{// brightness}
608     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (key == 101) \{ \textcolor{comment}{// up}
609         colorScale[0] += 20;
610         recomputeSpectrogramBytes();  \textcolor{comment}{// brightness}
611     \} \textcolor{keywordflow}{else} \{
612         fprintf(stderr, \textcolor{stringliteral}{"pressed special key %d\(\backslash\)n"}, key);
613     \}
614 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}\label{structSpectrogramVisualizer_a20eb03afddbbde072d82b1efe675b0f3}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!K\+E\+Y\+B\+O\+A\+R\+D\+\_\+\+S\+H\+O\+R\+T\+C\+U\+TS@{K\+E\+Y\+B\+O\+A\+R\+D\+\_\+\+S\+H\+O\+R\+T\+C\+U\+TS}}
\index{K\+E\+Y\+B\+O\+A\+R\+D\+\_\+\+S\+H\+O\+R\+T\+C\+U\+TS@{K\+E\+Y\+B\+O\+A\+R\+D\+\_\+\+S\+H\+O\+R\+T\+C\+U\+TS}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{K\+E\+Y\+B\+O\+A\+R\+D\+\_\+\+S\+H\+O\+R\+T\+C\+U\+TS}{KEYBOARD\_SHORTCUTS}}
{\footnotesize\ttfamily const \mbox{\hyperlink{structSpectrogramVisualizer_1_1shortcuts}{shortcuts}} Spectrogram\+Visualizer\+::\+K\+E\+Y\+B\+O\+A\+R\+D\+\_\+\+S\+H\+O\+R\+T\+C\+U\+TS\hspace{0.3cm}{\ttfamily [static]}}

Specific implementation of the shortcuts struct for this particular visualizer. 

Definition at line 47 of file Spectrogram\+Visualizer.\+hpp.

\mbox{\Hypertarget{structSpectrogramVisualizer_adfe2ed143313d59d7c118cadec1460b9}\label{structSpectrogramVisualizer_adfe2ed143313d59d7c118cadec1460b9}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!M\+I\+D\+D\+L\+E\+\_\+\+C\+\_\+\+F\+R\+E\+Q\+U\+E\+N\+CY@{M\+I\+D\+D\+L\+E\+\_\+\+C\+\_\+\+F\+R\+E\+Q\+U\+E\+N\+CY}}
\index{M\+I\+D\+D\+L\+E\+\_\+\+C\+\_\+\+F\+R\+E\+Q\+U\+E\+N\+CY@{M\+I\+D\+D\+L\+E\+\_\+\+C\+\_\+\+F\+R\+E\+Q\+U\+E\+N\+CY}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{M\+I\+D\+D\+L\+E\+\_\+\+C\+\_\+\+F\+R\+E\+Q\+U\+E\+N\+CY}{MIDDLE\_C\_FREQUENCY}}
{\footnotesize\ttfamily const float Spectrogram\+Visualizer\+::\+M\+I\+D\+D\+L\+E\+\_\+\+C\+\_\+\+F\+R\+E\+Q\+U\+E\+N\+CY = 261.\+626f\hspace{0.3cm}{\ttfamily [static]}}

Canonical middle C note frequency. \href{https://en.wikipedia.org/wiki/C_(musical_note)#Middle_C}{\tt https\+://en.\+wikipedia.\+org/wiki/\+C\+\_\+(musical\+\_\+note)\#\+Middle\+\_\+C} 

Definition at line 53 of file Spectrogram\+Visualizer.\+hpp.

\mbox{\Hypertarget{structSpectrogramVisualizer_affbdeff0d7b800feb17aab0a367222da}\label{structSpectrogramVisualizer_affbdeff0d7b800feb17aab0a367222da}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!N\+\_\+\+S\+E\+M\+I\+T\+O\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+O\+C\+T\+A\+VE@{N\+\_\+\+S\+E\+M\+I\+T\+O\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+O\+C\+T\+A\+VE}}
\index{N\+\_\+\+S\+E\+M\+I\+T\+O\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+O\+C\+T\+A\+VE@{N\+\_\+\+S\+E\+M\+I\+T\+O\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+O\+C\+T\+A\+VE}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{N\+\_\+\+S\+E\+M\+I\+T\+O\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+O\+C\+T\+A\+VE}{N\_SEMITONES\_PER\_OCTAVE}}
{\footnotesize\ttfamily const unsigned int Spectrogram\+Visualizer\+::\+N\+\_\+\+S\+E\+M\+I\+T\+O\+N\+E\+S\+\_\+\+P\+E\+R\+\_\+\+O\+C\+T\+A\+VE = 12\hspace{0.3cm}{\ttfamily [static]}}

Canonical number of semitones per octave. \href{https://en.wikipedia.org/wiki/Equal_temperament}{\tt https\+://en.\+wikipedia.\+org/wiki/\+Equal\+\_\+temperament} 

Definition at line 59 of file Spectrogram\+Visualizer.\+hpp.

\mbox{\Hypertarget{structSpectrogramVisualizer_ad833647df19d8ae0eb2e47efe989d1d9}\label{structSpectrogramVisualizer_ad833647df19d8ae0eb2e47efe989d1d9}} 
\index{Spectrogram\+Visualizer@{Spectrogram\+Visualizer}!note\+Names@{note\+Names}}
\index{note\+Names@{note\+Names}!Spectrogram\+Visualizer@{Spectrogram\+Visualizer}}
\subsubsection{\texorpdfstring{note\+Names}{noteNames}}
{\footnotesize\ttfamily const char $\ast$const Spectrogram\+Visualizer\+::note\+Names\hspace{0.3cm}{\ttfamily [static]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{
    \textcolor{stringliteral}{"C"}, \textcolor{stringliteral}{"C#"}, \textcolor{stringliteral}{"D"}, \textcolor{stringliteral}{"Eb"}, \textcolor{stringliteral}{"E"}, \textcolor{stringliteral}{"F"}, \textcolor{stringliteral}{"F#"}, \textcolor{stringliteral}{"G"}, \textcolor{stringliteral}{"G#"}, \textcolor{stringliteral}{"A"}, \textcolor{stringliteral}{"Bb"}, \textcolor{stringliteral}{"B"}
\}
\end{DoxyCode}
Simple array of canonical note names e.\+g. C\#, Cb, C, etc. 

Definition at line 30 of file Spectrogram\+Visualizer.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/Spectrogram\+Visualizer.\+cpp\item 
src/Spectrogram\+Visualizer.\+hpp\end{DoxyCompactItemize}
